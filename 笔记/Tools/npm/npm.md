# 什么是 npm

> npm（node  package  manager）是一个包管理器

包就是模块
npm 不需要手动安装，在安装 Node.js的时候就已经安装好了

## 作用

> 管理 Node 模块的工具

- 下载安装第三方模块
- 卸载第三方模块
- ...

第三方模块:

- 非 Node 内置模块，安装完 Node 还不能使用的模块，需要从网上下载安装，才能使用的模块
- 第三方模块是个人、公司、组织编写的模块，发布到网上，供我们使用
- 在 Node 核心模块的基础之上，封装了一下，实现了很多非常方便快速简洁的方法

## 初始化

> 在使用 npm 之前，必须先初始化

``` bash
npm init -y     # 不需要一步步确认，一步到位
# 或
npm init        # 需要一步步回车
```

初始化之后会在项目目录中生成一个 `package.json` 的文件

## 本地安装

- 查看 npm 版本

``` bash
npm -v
```

- 下载安装第三方模块

``` bash
npm i 模块名
# 或
npm install 模块名
```

- 卸载模块

``` bash
npm un 模块名
# 或
npm uninstall 模块名
```

## 项目模块说明

- 下载安装的模块，存放在当前文件夹的 `node_modules` 文件夹中，同时还会生成一个记录下载的文件 `package-lock.json`
- 下载的模块，在哪里可以用
  - 在当前文件夹
  - 在当前文件夹的子文件夹
  - 在当前文件夹的子文件夹的子文件夹
  - ......
- 怎么使用第三方模块
  - 和使用内置模块一样，需要使用 `require()` 加载模块
  - 调用模块提供的方法完成工作

## 全局安装

- 全局安装的模块，不能通过 `require()` 加载使用
- 全局安装的模块，一般都是命令或者工具
- 安装方法，在安装模块的命令后面添加 `-g`

``` bash
npm i 模块名 -g
# 或
npm i -g 模块名
```

- 查看全局安装的模块

``` bash
npm list -g --depth 0
```

- 卸载方法

``` bash
npm un 模块名 -g
```

- 全局安装的模块，在系统盘（C盘）
  - 通过命令 `npm root -g` 可以查看全局安装路径

## 全局安装 nodemon 模块

- 代替Node命令，启动服务器，当更改代码后 `nodemon` 会自动帮我们重启服务

``` bash
# 安装
npm i nodemon -g

# 运行
nodemon 文件名
```

## 本地安装和全局安装区别

1. 本地安装

    - 说明：想把我们用的包，安装到本地项目中使用
    - 比如：moment、jquery、mime
    - 要求：执行的安装命令位置，必须在当前项目下执行
    - 包位置：本地安装的包 => 当前项目下的 node_modules
    - 使用：需要先引

2. 全局安装

    - 说明：想把一个包/库，当成一个工具来使用，就采用全局安装
    - 比如：npm i -g live-server
    - 包位置：C:\Users\用户名\AppData\Roaming\npm
    - 使用：在`终端命令行`里使用，不能在代码里

## dependencies

- 保存依赖包的记录
- 如果项目中没有 `node_modules` 目录，但是有 `package.json` 说明项目是完整的，只需要执行 `npm i` 就会找 `package.json` 里面的 `dependencies` 并且安装里面所有的依赖包
- 执行 `npm i` 命令 要在 `package.json` 同级目录

## 更改镜像源

> 镜像源，就是下载安装第三方模块的网站

- 我们下载的第三方模块都是从国外的 npm 主站下载的，速度比较慢
- 淘宝在国内对 npm 上的第三方模块做了一个备份，也就是说，我们可以从国内下载第三方模块
- 除了淘宝之外，还有很多其他镜像源
- 更换镜像源的方法
  - 全局安装 `nrm` 模块
    - `nrm` 用于管理镜像源
  - 使用`nrm`

    ``` bash
    nrm ls # 通过这个命令，可以查看可用的镜像源
    ```

    ``` bash
    nrm use taobao # 切换下载模块的网站为淘宝
    ```
